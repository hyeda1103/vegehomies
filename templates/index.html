<!DOCTYPE html>
<html>

<head>
    <!-- WebPage Title -->
    <title>술고래는 채식주의자</title>
    <link href="static/stylesheet.css" rel="stylesheet" type="text/css">

    <!-- Required Meta Tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <!-- JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
    <script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js'></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Myeongjo:wght@400;700;800&display=swap" rel="stylesheet">

    <!-- favicon -->
    <link href="static/yeolsi.jpg" rel="shortcut icon">


</head>


<body>
    <div class="map_wrap" id="grad1" style="height: 100vh; padding: 10px;">

        <div id="map" style="width: 54.5%; height:100%; position:relative;
        overflow:hidden; margin-left: 45.45%; border-radius: 10px;"></div>

        <!-- 장소와 요일 기반 검색 -->
        <div id="menu_wrap" class="bg_white">

            <div class="searchContainer">
                <form onsubmit="searchPlaces(); return false;">
                    <div>
                        <input type="text" class="searchBox" placeholder=" " id="search">
                        <button id="searchBtn" class="searchButton" type="submit">검색</button>
                    </div>
                </form>

            </div>


            <button id="searchBtn" class="filterBtn" type="submit" onclick="filter()"
                style="margin-bottom: 1em;">필터추가</button>
            <div id=filterDiv>
                <div id="filterDiv1" class="dayFilter" style="font-size: 14px; margin: 0.5em;">
                    <input id="searchBtn" class="filterChk" type="checkbox" value="일" onclick="filterSelection()">
                    일요일</input> &nbsp;
                    <input id="searchBtn" class="filterChk" type="checkbox" value="월" onclick="filterSelection()">
                    월요일</input> &nbsp;
                    <input id="searchBtn" class="filterChk" type="checkbox" value="화" onclick="filterSelection()">
                    화요일</input> &nbsp;
                    <input id="searchBtn" class="filterChk" type="checkbox" value="수" onclick="filterSelection()">
                    수요일</input> <br>
                    <input id="searchBtn" class="filterChk" type="checkbox" value="목" onclick="filterSelection()">
                    목요일</input> &nbsp;
                    <input id="searchBtn" class="filterChk" type="checkbox" value="금" onclick="filterSelection()">
                    금요일</input> &nbsp;
                    <input id="searchBtn" class="filterChk" type="checkbox" value="토" onclick="filterSelection()">
                    토요일</input>
                </div>

                <div id="filterDiv2" class="menuFilter" style="font-size: 14px; margin: 0.5em;">
                    <input id="searchBtn" class="filterChk2" type="checkbox" value="15" onclick="filterSelection()">
                    낮(오후 2시 전에 열어요)</input> <br>
                    <input id="searchBtn" class="filterChk2" type="checkbox" value="22" onclick="filterSelection()">
                    심야(새벽에 문을 닫아요)</input>
                </div>
            </div>


            <p id="numofResults" class="informResults"></p>

            <hr>

            <ul id="placesList"></ul>

        </div>

        <!-- 안주와 술 기반 검색 -->
        <div id="menu_wrap2" class="bg_white2">

            <div>
                <button id="searchBtn" class="toggleButton" type="submit" onclick="showMenu();"> 영차영차🐢</button>
            </div>

            <br>
            <button id="searchBtn" class="filterBtn" type="submit" onclick="filter2();"
                style="margin-bottom: 1em;">필터추가</button>

            <div id="filter2Div" style="margin-bottom: 0.5em;">

                <div id="filterDiv3" class="menuFilter" style="font-size: 14px; margin: 0.5em;">
                    <input id="searchBtn" class="filterChk3" type="checkbox" value="마른안주" onclick="filterSelection2()">
                    마른안주</input> &nbsp;
                    <input id="searchBtn" class="filterChk3" type="checkbox" value="탕" onclick="filterSelection2()">
                    탕</input> &nbsp;
                    <input id="searchBtn" class="filterChk3" type="checkbox" value="볶음" onclick="filterSelection2()">
                    볶음</input> &nbsp;
                    <input id="searchBtn" class="filterChk3" type="checkbox" value="구이" onclick="filterSelection2()">
                    구이</input> <br>
                    <input id="searchBtn" class="filterChk3" type="checkbox" value="면" onclick="filterSelection2()">
                    면</input> &nbsp;   
                    <input id="searchBtn" class="filterChk3" type="checkbox" value="전" onclick="filterSelection2()">
                    전</input> &nbsp;
                    <input id="searchBtn" class="filterChk3" type="checkbox" value="튀김" onclick="filterSelection2()">
                    튀김</input> &nbsp;
                    <input id="searchBtn" class="filterChk3" type="checkbox" value="샐러드" onclick="filterSelection2()">
                    샐러드</input> &nbsp;
                </div>

                <div id="filterDiv4" class="priceFilter" style="font-size: 14px; margin: 0.5em; margin-bottom: 1em;">
                    <input id="searchBtn" class="filterChk4" type="checkbox" value="10000" onclick="filterSelection2()">
                    ~ 10,000원</input> &nbsp;
                    <input id="searchBtn" class="filterChk4" type="checkbox" value="15000" onclick="filterSelection2()">
                    ~ 15,000원</input> &nbsp;
                    <input id="searchBtn" class="filterChk4" type="checkbox" value="20000" onclick="filterSelection2()">
                    ~ 20,000원</input>
                </div>

            </div>

            <hr>

            <br>

            <ul id="menuList" style="font-size: 14px;"></ul>

        </div>

    </div>



    <script type="text/javascript"
        src="//dapi.kakao.com/v2/maps/sdk.js?appkey=1a3b30143ac575087758f5d636d25c4c&libraries=services"></script>


    <script>
        var mapContainer = document.getElementById('map'), // 지도를 표시할 div  
            mapOption = {
                center: new kakao.maps.LatLng(37.5638, 126.9084), // 지도의 중심좌표
                level: 6 // 지도의 확대 레벨
            };

        var map = new kakao.maps.Map(mapContainer, mapOption); // 지도를 생성합니다

        // 지도 확대 축소를 제어할 수 있는  줌 컨트롤을 생성합니다
        var zoomControl = new kakao.maps.ZoomControl();
        map.addControl(zoomControl, kakao.maps.ControlPosition.RIGHT);

        // 마커를 담을 배열입니다
        var markers = [];


        // 키워드로 장소를 검색합니다.
        $(document).ready(function () {
            searchPlaces();
            showMenu();
        });



        // 키워드 검색을 요청하는 함수입니다.
        function searchPlaces() {
            $.ajax({
                type: 'GET',
                url: '/vegeInfo',
                data: {},
                success: function (response) {

                    if (response['result'] == 'success') {
                        let drunkenVege = response['drunkenVege']

                        // DB에 있는 비건술집 이름을 랜덤으로 골라서 placeholder값으로 넣습니다. 
                        var list = [];

                        for (let i = 0; i < drunkenVege.length; i++) {
                            var name = drunkenVege[i]['name'];
                            list.push(name);
                            
                        }

                        var list, r = Math.floor(Math.random() * list.length);
                    

                        document.getElementById('search').placeholder = list[r];

                        // 검색창에 키워드가 입력하기를 요청합니다.
                        var keyword = document.getElementById('search').value;

                        displayPlaces(drunkenVege, keyword);

                    }
                }
            })
        }



        // 검색 결과 목록과 마커를 표출하는 함수입니다.
        function displayPlaces(drunkenVege, keyword) {

            // 검색어를 다시 입력하는 경우 기존에 체크된 필터조건은 리셋합니다
            $('input:checkbox').removeAttr('checked');


            if (!keyword.replace(/^\s+|\s+$/g, '')) {
                // alert('검색어를 입력해주세요!');
                displayMarkers(drunkenVege);


            } else {

                // 검색조건에 알맞은 비건술집정보를 담을 리스트를 생성합니다
                var places = [];

                for (let i = 0; i < drunkenVege.length; i++) {

                    // 특수문자 포함여부를 확인하기 위한 정규표현식 
                    var regExp = /[ \{\}\[\]\/?.,;:|\)*~`!^\-_+┼<>@\#$%&\ '\"\\(\=]/gi;


                    // DB 지역구
                    var district = drunkenVege[i]['district'];
                    var cityOnly = district.split(' ')[0];
                    var citynameOnly = cityOnly.slice(0, -1);
                    var districtOnly = district.split(' ')[1];
                    var districtRe = district.replace(/(\s*)/g, ""); // 지역구의 모든 공백을 제거
                    var newDistrict = districtRe.replace(regExp, ""); // 모든 특수문자를 제거


                    // DB 식당이름
                    var name = drunkenVege[i]['name'];
                    var nameRe = name.replace(/(\s*)/g, ""); // 이름의 모든 공백을 제거
                    var newName = nameRe.replace(regExp, ""); // 모든 특수문자를 제거


                    // 입력된 키워드
                    var keyword = document.getElementById('search').value;
                    var keywordRe = keyword.replace(/(\s*)/g, ""); // 키워드의 모든 공백을 제거
                    var newKeyword = keywordRe.replace(regExp, ""); // 모든 특수문자를 제거


                    if (newKeyword == newDistrict || newKeyword == newName || newKeyword == cityOnly || newKeyword == citynameOnly || newKeyword == districtOnly) {
                        places.push(drunkenVege[i]);
                    }
                }

                

                if (places.length != 0) {

                    displayMarkers(places);

                } else {

                    // 검색 결과 목록에 추가된 항목들을 제거합니다
                    var listEl = document.getElementById('placesList');
                    removeAllChildNods(listEl);

                    // 지도를 재설정할 범위정보를 가지고 있을 LatLngBounds 객체를 생성합니다
                    var bounds = new kakao.maps.LatLngBounds();

                    // 지도에 표시되고 있는 마커를 제거합니다
                    removeMarker();

                    // 검색결과가 존재하지 않음을 표기합니다
                    document.getElementById("numofResults").innerHTML = '<p>' + '검색결과가 존재하지 않습니다.' + '</p>';

                    // 2초 뒤에 표기한 메시지가 사라집니다
                    $('#numofResults').fadeIn('slow', function () {
                        $('#numofResults').delay(2000)

                    });

                    // 검색어를 리셋합니다
                    var keyword = '';

                    // 3초 뒤에 검색 첫 화면으로 돌아갑니다
                    setTimeout(() => {
                        displayPlaces(drunkenVege, keyword);
                    }, 2000);
                }
            }

        }



        // 검색결과 항목을 Element로 반환하는 함수입니다
        function getListItem(index, places) {

            var instaUrl = "http://www.instagram.com/" + places.instaID + "/?hl=ko";

            var el = document.createElement('li'),
                itemStr = '<div id = "vegeRestaurant" onclick="reboundMap(\'' + places.instaID + '\')">' + '<span class="markerbg marker_' + (index + 1) + '"></span>' +
                    '<div class="info">' +
                    '   <h5>' + places.name + '</h5>';

            itemStr += '    <span>' + places.address + '</span>';

            itemStr += '    <span>' + places.runningtime + '</span>';

            itemStr += '<a href="' + instaUrl + '" target="_blank">' + '<span class="tel">' + '@' + places.instaID + '</span>' + '</a>';

            itemStr += '<button id="searchBtn" onclick="searchMenu(\'' + places.instaID + '\');" class="toggleButton" type="submit">' + '안주구경👀' + '</button>';

            itemStr += '<br>' + '<div id="menuBox">' + '</div>' + '</div>';


            el.innerHTML = itemStr;
            el.className = 'item';

            return el;


        }


        function showMenu() {
            $.ajax({
                type: 'GET',
                url: '/vegeInfo',
                data: {},
                success: function (response) {

                    space = [];

                    if (response['result'] == 'success') {
                        let drunkenVege = response['drunkenVege']

                        for (i = 0; i < drunkenVege.length; i++) {
                            let instaID = drunkenVege[i]['instaID']
                            
                            space.push(drunkenVege[i]);

                        }

                        menuList = [];

                        for (j = 0; j < space.length; j++) {
                            menuList.push(space[j]['menu'].split('/'));
                        }

                        let menuListEl = document.getElementById('menuList');

                        removeAllChildNods(menuListEl);

                        for (i = 0; i < menuList.length; i++) {

                            for (j = 0; j < menuList[i].length; j++) {

                                var x = document.createElement("li");

                                var menuName = '👽' + menuList[i][j].split('+')[0];

                                var menuPrice = '⚡' + menuList[i][j].split('+')[1] + '원';

                                var menuNamePrice = menuName + '   ' + menuPrice;


                                var t = document.createTextNode(menuNamePrice);

                                x.appendChild(t);

                                document.getElementById("menuList").appendChild(x);

                            }


                        }

                    }
                }
            })
        }



        function searchMenu(bar) {

            $.ajax({
                type: 'GET',
                url: '/vegeInfo',
                data: {},
                success: function (response) {

                    space = [];

                    if (response['result'] == 'success') {
                        let drunkenVege = response['drunkenVege']

                        for (i = 0; i < drunkenVege.length; i++) {
                            let instaID = drunkenVege[i]['instaID']
                            
                            if (bar == instaID) {
                                space.push(drunkenVege[i]);
                            }

                        }

                        let menuList = space[0]['menu'].split('/');

                        let menuListEl = document.getElementById('menuList');
                        removeAllChildNods(menuListEl);

                        for (i = 0; i < menuList.length; i++) {

                            var x = document.createElement("li");

                            var menuName = '👽' + menuList[i].split('+')[0];

                            var menuPrice = '⚡' + menuList[i].split('+')[1] + '원';

                            var menuNamePrice = menuName + '   ' + menuPrice;


                            var t = document.createTextNode(menuNamePrice);

                            x.appendChild(t);

                            document.getElementById("menuList").appendChild(x);


                        }

                    }
                }
            })
        }


        // 목록창의 특정 item div를 클릭하면 해당하는 비건술집을 중심으로 지도 범위를 재설정하는 함수입니다
        // ex) 포인트프레드릭 div 클릭하면 포인트프레드릭 마커가 지도 중심으로 뜬다. 
        function reboundMap(bar) {
            $.ajax({
                type: 'GET',
                url: '/vegeInfo',
                data: {},
                success: function (response) {

                    space = [];

                    if (response['result'] == 'success') {
                        let drunkenVege = response['drunkenVege']

                        for (i = 0; i < drunkenVege.length; i++) {
                            let instaID = drunkenVege[i]['instaID']
                            

                            if (bar == instaID) {
                                space.push(drunkenVege[i]);

                                var point = new kakao.maps.LatLng(space[0]['latitude'], space[0]['longitude']);

                                var bounds = new kakao.maps.LatLngBounds();

                                bounds.extend(point);

                                map.setBounds(bounds);

                            }
                        }
                    }
                }
            })
        }



        // 마커를 생성하고 지도 위에 마커를 표시하는 함수입니다
        function addMarker(placePosition, i, title) {
            var imageSrc = 'https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/marker_number_blue.png', // 마커 이미지 url, 스프라이트 이미지를 씁니다
                imageSize = new kakao.maps.Size(36, 37), // 마커 이미지의 크기
                imgOptions = {
                    spriteSize: new kakao.maps.Size(36, 691), // 스프라이트 이미지의 크기
                    spriteOrigin: new kakao.maps.Point(0, (i * 46) + 10), // 스프라이트 이미지 중 사용할 영역의 좌상단 좌표
                    offset: new kakao.maps.Point(13, 37) // 마커 좌표에 일치시킬 이미지 내에서의 좌표
                },
                markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize, imgOptions),
                marker = new kakao.maps.Marker({
                    map: map, // 마커를 표시할 지도
                    position: placePosition, // 마커를 표시할 위치
                    title: title, // 마커의 타이틀, 마커에 마우스를 올리면 타이틀이 표시됩니다
                    image: markerImage // 마커 이미지
                });

            marker.setMap(map); // 지도 위에 마커를 표출합니다
            markers.push(marker); // 배열에 생성된 마커를 추가합니다

            return marker;
        }



        // 지도 위에 표시되고 있는 마커를 모두 제거합니다
        function removeMarker() {
            for (var i = 0; i < markers.length; i++) {
                markers[i].setMap(null);
            }
            markers = [];
        }



        // 검색결과 목록의 자식 Element를 제거하는 함수입니다
        function removeAllChildNods(el) {
            while (el.hasChildNodes()) {
                el.removeChild(el.lastChild);
            }
        }

        // 장소와 요일, 시간 기반 검색창의 필터를 열고 닫습니다
        function filter() {
            $('#filterDiv').slideToggle();

        }

        // 안주 기반 검색창의 필터를 열고 닫습니다
        function filter2() {
            $('#filter2Div').slideToggle();

        }

        // 장소와 요일, 시간 기반 검색창의 필터링 기능을 담당하는 함수입니다
        function filterSelection() {
            $.ajax({
                type: 'GET',
                url: '/vegeInfo',
                data: {},
                success: function (response) {
                    let drunkenVege = response['drunkenVege'];
                    let resArr = drunkenVege;

                    var keyword = document.getElementById('search').value;

                    // 검색창의 keyword와 일치하는 술집 데이터를 담습니다
                    var places = [];

                    // 새벽까지 운영하는 술집 데이터를 담습니다
                    var placesForMidnight = [];

                    // 오후 2시 이전부터 운영하는 술집 데이터를 담습니다
                    var placesForDaytime = [];

                    // 요일을 기준으로 필터링한 술집 데이터를 담습니다

                    let sun = [];
                    let mon = [];
                    let tue = [];
                    let wed = [];
                    let thr = [];
                    let fri = [];
                    let sat = [];

                    let day = [sun, mon, tue, wed, thr, fri, sat];


                    for (let i = 0; i < drunkenVege.length; i++) {

                        // 특수문자 포함여부를 확인하기 위한 정규표현식 
                        var regExp = /[ \{\}\[\]\/?.,;:|\)*~`!^\-_+┼<>@\#$%&\ '\"\\(\=]/gi;


                        // DB 지역구
                        var district = drunkenVege[i]['district'];
                        var cityOnly = district.split(' ')[0];
                        var citynameOnly = cityOnly.slice(0, -1);
                        var districtOnly = district.split(' ')[1];
                        var districtRe = district.replace(/(\s*)/g, ""); // 지역구의 모든 공백을 제거
                        var newDistrict = districtRe.replace(regExp, ""); // 모든 특수문자를 제거


                        // DB 식당이름
                        var name = drunkenVege[i]['name'];
                        var nameRe = name.replace(/(\s*)/g, ""); // 이름의 모든 공백을 제거
                        var newName = nameRe.replace(regExp, ""); // 모든 특수문자를 제거


                        // 입력된 키워드
                        var keyword = document.getElementById('search').value;
                        var keywordRe = keyword.replace(/(\s*)/g, ""); // 키워드의 모든 공백을 제거
                        var newKeyword = keywordRe.replace(regExp, ""); // 모든 특수문자를 제거


                        if (newKeyword == newDistrict || newKeyword == newName || newKeyword == cityOnly || newKeyword == citynameOnly || newKeyword == districtOnly) {
                            places.push(drunkenVege[i]);
                        }

                        // 비건술집 요일별 운영시간을 정리해놓은 데이터를 불러옵니다
                        let runningTimeDay = drunkenVege[i]['runningtime'];

                        // 요일별 운영시간이 다른 경우, 술집 문을 여는 시간과 닫는 시간을 구합니다
                        if (runningTimeDay.includes('/')) {

                            runningTimeDay = runningTimeDay.split('/');
                            
                            for (j = 0; j < runningTimeDay.length; j++) {

                                let runningTime = runningTimeDay[j].split('(')[0];
                                let runningDay = runningTimeDay[j].split('(')[1].split(')')[0];

                                let openingTime = runningTime.split('-')[0];
                                let closingTime = runningTime.split('-')[1];

                                if (openingTime.includes(':')) {

                                    openingTime = Number(openingTime.split(':')[0]) + 1;

                                }

                                if (closingTime.includes(':')) {

                                    closingTime = Number(openingTime.split(':')[0]) + 1;

                                }

                                
                                // 여는 시간이 오후 2시 이전인 술집의 정보를 placesForDaytime에 담습니다
                                if (openingTime < 14) {

                                    placesForDaytime.push(drunkenVege[i]);

                                }
                                // 닫는 시간이 새벽시간대인 술집의 정보를 placesForMidnight에 담습니다
                                if (closingTime < 6 || closingTime == '*') {

                                    placesForMidnight.push(drunkenVege[i]);

                                }

                            }
                        }
                        // 요일과 상관없이 운영시간이 동일한 경우, 술집 문을 여는 시간과 닫는 시간을 구합니다
                        else {
                            let runningTime = runningTimeDay.split('(')[0];
                            let runningDay = runningTimeDay.split('(')[1].split(')')[0];
                            let openingTime = runningTime.split('-')[0];
                            let closingTime = runningTime.split('-')[1];

                            if (openingTime.includes(':')) {

                                openingTime = Number(openingTime.split(':')[0]) + 1;

                            }

                            if (closingTime.includes(':')) {

                                closingTime = Number(closingTime.split(':')[0]) + 1;

                            }

                            // 여는 시간이 오후 2시 이전인 술집의 정보를 placesForDaytime에 담습니다
                            if (openingTime < 14) {

                                placesForDaytime.push(drunkenVege[i]);

                            }
                            // 닫는 시간이 새벽시간대인 술집의 정보를 placesForMidnight에 담습니다
                            if (closingTime < 6 || closingTime == '*') {

                                placesForMidnight.push(drunkenVege[i]);

                            }


                        }
                    }

                    // 중복되는 정보를 삭제합니다
                    placesForDaytime = [...new Set(placesForDaytime)];
                    placesForMidnight = [...new Set(placesForMidnight)];

                    // 키워드와 일치하는 술집 정보를 keywordResArr에 담습니다 
                    let keywordResArr = places;

                    // 필터링 기준이 요일인 체크박스들을 filterChk로 불러옵니다
                    let filtChk = document.querySelectorAll(".filterChk");

                    // filterChk의 요일 value를 filterEl에 담습니다
                    let filterEl = [];

                    for (i = 0; i < filtChk.length; i++) {
                        filterEl.push(filtChk[i]['value']);
                    }

                    // 필터링 기준이 시간인 체크박스들을 filterChk2로 불러옵니다
                    let filtChk2 = document.querySelectorAll(".filterChk2");


                    // 검색어를 입력하지 않은 상태에서 필터링하는 경우
                    if (keyword == '') {

                        for (i = 0; i < filtChk.length; i++) {
                            for (j = 0; j < filtChk2.length; j++) {

                                // 요일 + 낮술
                                if (filtChk[i].checked == true && filtChk2[0].checked == true && filtChk2[1].checked == false) {


                                    day[i] = resArr.filter(function (resArr) {
                                        return resArr['runningtime'].includes(filterEl[i]);
                                    })

                                    let union = [...new Set([...day[0], ...day[1], ...day[2], ...day[3], ...day[4], ...day[5], ...day[6]])];


                                    // 요일을 기준으로 필터링한 술집 데이터를 담습니다

                                    let dayTime = [sun, mon, tue, wed, thr, fri, sat];



                                    for (k = 0; k < union.length; k++) {

                                        let runningTimeDay = union[k]['runningtime'];

                                        if (runningTimeDay.includes('/')) {
                                            runningTimeDay = runningTimeDay.split('/');


                                            for (l = 0; l < runningTimeDay.length; l++) {
                                                runningTime = runningTimeDay[l].split('(')[0];
                                                runningDay = runningTimeDay[l].split('(')[1].split(')')[0];
                                                openingTime = runningTime.split('-')[0];


                                                if (openingTime.includes(':')) {

                                                    openingTime = Number(openingTime.split(':')[0]) + 1;

                                                }


                                                if (runningDay.includes(filterEl[i]) && openingTime < 14) {
                                                    dayTime[i].push(union[k]);
                                                }

                                            }

                                        }
                                        else {
                                            runningTime = runningTimeDay.split('(')[0];
                                            runningDay = runningTimeDay.split('(')[1].split(')')[0];
                                            openingTime = runningTime.split('-')[0];

                                            if (openingTime.includes(':')) {

                                                openingTime = Number(openingTime.split(':')[0]) + 1;

                                            }


                                            if (runningDay.includes(filterEl[i]) && openingTime < 14) {
                                                dayTime[i].push(union[k]);
                                            }


                                        }

                                    }


                                    let reunion = [...new Set([...dayTime[0], ...dayTime[1], ...dayTime[2], ...dayTime[3], ...dayTime[4], ...dayTime[5], ...dayTime[6]])];
                                    

                                    displayMarkers(reunion);

                                    // updateMenu(reunion);

                                }
                                // 요일 + 심야술
                                else if (filtChk[i].checked == true && filtChk2[0].checked == false && filtChk2[1].checked == true) {


                                    day[i] = resArr.filter(function (resArr) {
                                        return resArr['runningtime'].includes(filterEl[i]);
                                    })

                                    let union = [...new Set([...day[0], ...day[1], ...day[2], ...day[3], ...day[4], ...day[5], ...day[6]])];


                                    let midnight = [sun, mon, tue, wed, thr, fri, sat];


                                    for (k = 0; k < union.length; k++) {

                                        let runningTimeDay = union[k]['runningtime'];
                                        
                                        if (runningTimeDay.includes('/')) {
                                            runningTimeDay = runningTimeDay.split('/');

                                            
                                            for (l = 0; l < runningTimeDay.length; l++) {
                                                runningTime = runningTimeDay[l].split('(')[0];
                                                runningDay = runningTimeDay[l].split('(')[1].split(')')[0];
                                                closingTime = runningTime.split('-')[1];
                                                

                                                if (closingTime.includes(':')) {

                                                    closingTime = Number(closingTime.split(':')[0]) + 1;

                                                }


                                                if (runningDay.includes(filterEl[i]) && (closingTime < 6 || closingTime == '*')) {
                                                    midnight[i].push(union[k]);
                                                }

                                            }

                                        }
                                        else {
                                            runningTime = runningTimeDay.split('(')[0];
                                            runningDay = runningTimeDay.split('(')[1].split(')')[0];
                                            closingTime = runningTime.split('-')[1];
                                            

                                            if (closingTime.includes(':')) {

                                                closingTime = Number(closingTime.split(':')[0]) + 1;

                                            }

                                            if (runningDay.includes(filterEl[i]) && (closingTime < 6 || closingTime == '*')) {
                                                midnight[i].push(union[k]);
                                            }


                                        }

                                    }


                                    let reunion = [...new Set([...midnight[0], ...midnight[1], ...midnight[2], ...midnight[3], ...midnight[4], ...midnight[5], ...midnight[6]])];
                            
                                    displayMarkers(reunion);

                                }
                                // 요일 + 낮술 + 심야술
                                else if (filtChk[i].checked == true && filtChk2[0].checked == true && filtChk2[1].checked == true) {


                                    day[i] = resArr.filter(function (resArr) {
                                        return resArr['runningtime'].includes(filterEl[i]);
                                    })

                                    let union = [...new Set([...day[0], ...day[1], ...day[2], ...day[3], ...day[4], ...day[5], ...day[6]])];


                                    let placesForAnytime = [];

                                    for (k = 0; k < resArr.length; k++) {

                                        let runningTimeDay = resArr[k]['runningtime'];
                                        
                                        if (runningTimeDay.includes('/')) {
                                            runningTimeDay = runningTimeDay.split('/');


                                            for (l = 0; l < runningTimeDay.length; l++) {
                                                runningTime = runningTimeDay[l].split('(')[0];
                                                runningDay = runningTimeDay[l].split('(')[1].split(')')[0];
                                                openingTime = runningTime.split('-')[0];
                                                closingTime = runningTime.split('-')[1];
                                                

                                                if (openingTime.includes(':')) {

                                                    openingTime = Number(openingTime.split(':')[0]) + 1;

                                                }

                                                if (closingTime.includes(':')) {

                                                    closingTime = Number(closingTime.split(':')[0]) + 1;

                                                }

                                                if (runningDay.includes(filterEl[i]) && closingTime < 6 && openingTime < 14) {
                                                    placesForAnytime.push(resArr[k]);
                                                }

                                            }

                                        }
                                        else {
                                            runningTime = runningTimeDay.split('(')[0];
                                            runningDay = runningTimeDay.split('(')[1].split(')')[0];
                                            openingTime = runningTime.split('-')[0];
                                            closingTime = runningTime.split('-')[1];
                                            

                                            if (openingTime.includes(':')) {

                                                openingTime = Number(openingTime.split(':')[0]) + 1;

                                            }

                                            if (closingTime.includes(':')) {

                                                closingTime = Number(closingTime.split(':')[0]) + 1;

                                            }

                                            if (runningDay.includes(filterEl[i]) && closingTime < 6 && openingTime < 14) {
                                                placesForAnytime.push(resArr[k]);
                                            }


                                        }

                                    }


                                    placesForAnytime = [...new Set(placesForAnytime)];

                                    let intersection = union.filter(x => placesForAnytime.includes(x));


                                    displayMarkers(intersection);

                                    // updateMenu(intersection);


                                }
                                // 요일 상관없이 낮술
                                else if (filtChk[0].checked == false && filtChk[1].checked == false && filtChk[2].checked == false
                                    && filtChk[3].checked == false && filtChk[4].checked == false && filtChk[5].checked == false
                                    && filtChk[6].checked == false && filtChk2[0].checked == true && filtChk2[1].checked == false) {


                                    displayMarkers(placesForDaytime);

                                    // updateMenu(intersection);


                                }
                                // 요일 상관없이 심야술 
                                else if (filtChk[0].checked == false && filtChk[1].checked == false && filtChk[2].checked == false
                                    && filtChk[3].checked == false && filtChk[4].checked == false && filtChk[5].checked == false
                                    && filtChk[6].checked == false && filtChk2[0].checked == false && filtChk2[1].checked == true) {


                                    displayMarkers(placesForMidnight);

                                    // updateMenu(intersection);


                                }
                                // 시간 관계없이 요일만 고르는 경우
                                else if (filtChk[i].checked == true && filtChk2[0].checked == false && filtChk2[1].checked == false) {


                                    day[i] = resArr.filter(function (resArr) {
                                        return resArr['runningtime'].includes(filterEl[i]);
                                    })

                                    let union = [...new Set([...day[0], ...day[1], ...day[2], ...day[3], ...day[4], ...day[5], ...day[6]])];

                                    displayMarkers(union);
                                    // updateMenu(union);

                                }
                                // 요일은 고르지 않고 낮술 심야술 다 되는 술집 고르는 경우
                                else if (filtChk[0].checked == false && filtChk[1].checked == false && filtChk[2].checked == false
                                    && filtChk[3].checked == false && filtChk[4].checked == false && filtChk[5].checked == false && filtChk[6].checked == false
                                    && filtChk2[j].checked == true) {


                                    let intersection = placesForDaytime.filter(x => placesForMidnight.includes(x))

                                    displayMarkers(intersection);

                                    // updateMenu(intersection);



                                }
                                // 요일도 시간도 고르지 않은 경우 
                                else if (filtChk[0].checked == false && filtChk[1].checked == false && filtChk[2].checked == false
                                    && filtChk[3].checked == false && filtChk[4].checked == false && filtChk[5].checked == false && filtChk[6].checked == false
                                    && filtChk2[0].checked == false && filtChk2[1].checked == false) {

                                    displayMarkers(drunkenVege);

                                    // updateMenu(drunkenVege);

                                }
                            }


                        }

                    }

                    // 검색어가 입력된 상태에서 필터링하는 경우
                    else {
                        for (i = 0; i < filtChk.length; i++) {
                            for (j = 0; j < filtChk2.length; j++) {

                                // 요일 + 낮술
                                if (filtChk[i].checked == true && filtChk2[0].checked == true && filtChk2[1].checked == false) {


                                    day[i] = keywordResArr.filter(function (keywordResArr) {
                                        return keywordResArr['runningtime'].includes(filterEl[i]);
                                    })

                                    let union = [...new Set([...day[0], ...day[1], ...day[2], ...day[3], ...day[4], ...day[5], ...day[6]])];


                                    // 요일을 기준으로 필터링한 술집 데이터를 담습니다

                                    let dayTime = [sun, mon, tue, wed, thr, fri, sat];



                                    for (k = 0; k < union.length; k++) {

                                        let runningTimeDay = union[k]['runningtime'];

                                        if (runningTimeDay.includes('/')) {
                                            runningTimeDay = runningTimeDay.split('/');


                                            for (l = 0; l < runningTimeDay.length; l++) {
                                                runningTime = runningTimeDay[l].split('(')[0];
                                                runningDay = runningTimeDay[l].split('(')[1].split(')')[0];
                                                openingTime = runningTime.split('-')[0];


                                                if (openingTime.includes(':')) {

                                                    openingTime = Number(openingTime.split(':')[0]) + 1;

                                                }


                                                if (runningDay.includes(filterEl[i]) && openingTime < 14) {
                                                    dayTime[i].push(union[k]);
                                                }

                                            }

                                        }
                                        else {
                                            runningTime = runningTimeDay.split('(')[0];
                                            runningDay = runningTimeDay.split('(')[1].split(')')[0];
                                            openingTime = runningTime.split('-')[0];

                                            if (openingTime.includes(':')) {

                                                openingTime = Number(openingTime.split(':')[0]) + 1;

                                            }


                                            if (runningDay.includes(filterEl[i]) && openingTime < 14) {
                                                dayTime[i].push(union[k]);
                                            }


                                        }

                                    }


                                    let reunion = [...new Set([...dayTime[0], ...dayTime[1], ...dayTime[2], ...dayTime[3], ...dayTime[4], ...dayTime[5], ...dayTime[6]])];
                                    

                                    displayMarkers(reunion);

                                    // updateMenu(reunion);

                                }
                                // 요일 + 심야술
                                else if (filtChk[i].checked == true && filtChk2[0].checked == false && filtChk2[1].checked == true) {


                                    day[i] = keywordResArr.filter(function (keywordResArr) {
                                        return keywordResArr['runningtime'].includes(filterEl[i]);
                                    })

                                    let union = [...new Set([...day[0], ...day[1], ...day[2], ...day[3], ...day[4], ...day[5], ...day[6]])];


                                    let midnight = [sun, mon, tue, wed, thr, fri, sat];


                                    for (k = 0; k < union.length; k++) {

                                        let runningTimeDay = union[k]['runningtime'];
                                        
                                        if (runningTimeDay.includes('/')) {
                                            runningTimeDay = runningTimeDay.split('/');

                                        
                                            for (l = 0; l < runningTimeDay.length; l++) {
                                                runningTime = runningTimeDay[l].split('(')[0];
                                                runningDay = runningTimeDay[l].split('(')[1].split(')')[0];
                                                closingTime = runningTime.split('-')[1];
                                                

                                                if (closingTime.includes(':')) {

                                                    closingTime = Number(closingTime.split(':')[0]) + 1;

                                                }


                                                if (runningDay.includes(filterEl[i]) && (closingTime < 6 || closingTime == '*')) {
                                                    midnight[i].push(union[k]);
                                                }

                                            }

                                        }
                                        else {
                                            runningTime = runningTimeDay.split('(')[0];
                                            runningDay = runningTimeDay.split('(')[1].split(')')[0];
                                            closingTime = runningTime.split('-')[1];
                                            

                                            if (closingTime.includes(':')) {

                                                closingTime = Number(closingTime.split(':')[0]) + 1;

                                            }

                                            if (runningDay.includes(filterEl[i]) && (closingTime < 6 || closingTime == '*')) {
                                                midnight[i].push(union[k]);
                                            }


                                        }

                                    }


                                    let reunion = [...new Set([...midnight[0], ...midnight[1], ...midnight[2], ...midnight[3], ...midnight[4], ...midnight[5], ...midnight[6]])];
                                    

                                    displayMarkers(reunion);

                                }
                                // 요일 + 낮술 + 심야술
                                else if (filtChk[i].checked == true && filtChk2[0].checked == true && filtChk2[1].checked == true) {


                                    day[i] = keywordResArr.filter(function (keywordResArr) {
                                        return keywordResArr['runningtime'].includes(filterEl[i]);
                                    })

                                    let union = [...new Set([...day[0], ...day[1], ...day[2], ...day[3], ...day[4], ...day[5], ...day[6]])];


                                    let placesForAnytime = [];

                                    for (k = 0; k < keywordResArr.length; k++) {

                                        let runningTimeDay = keywordResArr[k]['runningtime'];
                                    
                                        if (runningTimeDay.includes('/')) {
                                            runningTimeDay = runningTimeDay.split('/');

                                            
                                            for (l = 0; l < runningTimeDay.length; l++) {
                                                runningTime = runningTimeDay[l].split('(')[0];
                                                runningDay = runningTimeDay[l].split('(')[1].split(')')[0];
                                                openingTime = runningTime.split('-')[0];
                                                closingTime = runningTime.split('-')[1];
                                                

                                                if (openingTime.includes(':')) {

                                                    openingTime = Number(openingTime.split(':')[0]) + 1;

                                                }

                                                if (closingTime.includes(':')) {

                                                    closingTime = Number(closingTime.split(':')[0]) + 1;

                                                }

                                                if (runningDay.includes(filterEl[i]) && closingTime < 6 && openingTime < 14) {
                                                    placesForAnytime.push(keywordResArr[k]);
                                                }

                                            }

                                        }
                                        else {
                                            runningTime = runningTimeDay.split('(')[0];
                                            runningDay = runningTimeDay.split('(')[1].split(')')[0];
                                            openingTime = runningTime.split('-')[0];
                                            closingTime = runningTime.split('-')[1];
                                            

                                            if (openingTime.includes(':')) {

                                                openingTime = Number(openingTime.split(':')[0]) + 1;

                                            }

                                            if (closingTime.includes(':')) {

                                                closingTime = Number(closingTime.split(':')[0]) + 1;

                                            }

                                            if (runningDay.includes(filterEl[i]) && closingTime < 6 && openingTime < 14) {
                                                placesForAnytime.push(keywordResArr[k]);
                                            }


                                        }

                                    }


                                    placesForAnytime = [...new Set(placesForAnytime)];

                                    let intersection = union.filter(x => placesForAnytime.includes(x));


                                    displayMarkers(intersection);

                        
                                }
                                // 요일 상관없이 낮술
                                else if (filtChk[0].checked == false && filtChk[1].checked == false && filtChk[2].checked == false
                                    && filtChk[3].checked == false && filtChk[4].checked == false && filtChk[5].checked == false
                                    && filtChk[6].checked == false && filtChk2[0].checked == true && filtChk2[1].checked == false) {


                                    dayTime = [];

                                    for (k = 0; k < keywordResArr.length; k++) {

                                        let runningTimeDay = keywordResArr[k]['runningtime'];

                                        if (runningTimeDay.includes('/')) {
                                            runningTimeDay = runningTimeDay.split('/');


                                            for (l = 0; l < runningTimeDay.length; l++) {
                                                runningTime = runningTimeDay[l].split('(')[0];
                                                runningDay = runningTimeDay[l].split('(')[1].split(')')[0];
                                                openingTime = runningTime.split('-')[0];


                                                if (openingTime.includes(':')) {

                                                    openingTime = Number(openingTime.split(':')[0]) + 1;

                                                }


                                                if (openingTime < 14) {
                                                    dayTime.push(keywordResArr[k]);
                                                }

                                            }

                                        }
                                        else {
                                            runningTime = runningTimeDay.split('(')[0];
                                            runningDay = runningTimeDay.split('(')[1].split(')')[0];
                                            openingTime = runningTime.split('-')[0];

                                            if (openingTime.includes(':')) {

                                                openingTime = Number(openingTime.split(':')[0]) + 1;

                                            }


                                            if (openingTime < 14) {
                                                dayTime.push(keywordResArr[k]);
                                            }


                                        }

                                    }


                                    let union = [...new Set([...dayTime])];


                                    displayMarkers(union);

                                    // updateMenu(intersection);


                                }
                                // 요일 상관없이 심야술 
                                else if (filtChk[0].checked == false && filtChk[1].checked == false && filtChk[2].checked == false
                                    && filtChk[3].checked == false && filtChk[4].checked == false && filtChk[5].checked == false
                                    && filtChk[6].checked == false && filtChk2[0].checked == false && filtChk2[1].checked == true) {


                                    midnight = [];

                                    for (k = 0; k < keywordResArr.length; k++) {

                                        let runningTimeDay = keywordResArr[k]['runningtime'];

                                        if (runningTimeDay.includes('/')) {
                                            runningTimeDay = runningTimeDay.split('/');


                                            for (l = 0; l < runningTimeDay.length; l++) {
                                                runningTime = runningTimeDay[l].split('(')[0];
                                                runningDay = runningTimeDay[l].split('(')[1].split(')')[0];
                                                closingTime = runningTime.split('-')[1];


                                                if (closingTime.includes(':')) {

                                                    closingTime = Number(closingTime.split(':')[0]) + 1;

                                                }


                                                if (closingTime < 6 || closingTime == '*') {
                                                    midnight.push(keywordResArr[k]);
                                                }

                                            }

                                        }
                                        else {
                                            runningTime = runningTimeDay.split('(')[0];
                                            runningDay = runningTimeDay.split('(')[1].split(')')[0];
                                            closingTime = runningTime.split('-')[1];

                                            if (closingTime.includes(':')) {

                                                closingTime = Number(closingTime.split(':')[0]) + 1;

                                            }


                                            if (closingTime < 6 || closingTime == '*') {
                                                midnight.push(keywordResArr[k]);
                                            }


                                        }

                                    }


                                    let union = [...new Set([...midnight])];


                                    displayMarkers(union);

                                    // updateMenu(intersection);


                                }
                                // 시간 관계없이 요일만 고르는 경우
                                else if (filtChk[i].checked == true && filtChk2[0].checked == false && filtChk2[1].checked == false) {


                                    day[i] = keywordResArr.filter(function (keywordResArr) {
                                        return keywordResArr['runningtime'].includes(filterEl[i]);
                                    })

                                    let union = [...new Set([...day[0], ...day[1], ...day[2], ...day[3], ...day[4], ...day[5], ...day[6]])];

                                    displayMarkers(union);
                                    // updateMenu(union);

                                }
                                // 요일은 고르지 않고 낮술 심야술 다 되는 술집 고르는 경우
                                else if (filtChk[0].checked == false && filtChk[1].checked == false && filtChk[2].checked == false
                                    && filtChk[3].checked == false && filtChk[4].checked == false && filtChk[5].checked == false && filtChk[6].checked == false
                                    && filtChk2[j].checked == true) {

                                    anyTime = [];


                                    for (k = 0; k < keywordResArr.length; k++) {

                                        let runningTimeDay = keywordResArr[k]['runningtime'];

                                        if (runningTimeDay.includes('/')) {
                                            runningTimeDay = runningTimeDay.split('/');


                                            for (l = 0; l < runningTimeDay.length; l++) {
                                                runningTime = runningTimeDay[l].split('(')[0];
                                                runningDay = runningTimeDay[l].split('(')[1].split(')')[0];
                                                openingTime = runningTime.split('-')[0];
                                                closingTime = runningTime.split('-')[1];

                                                if (openingTime.includes(':')) {

                                                    openingTime = Number(openingTime.split(':')[0]) + 1;

                                                }

                                                if (closingTime.includes(':')) {

                                                    closingTime = Number(closingTime.split(':')[0]) + 1;

                                                }


                                                if (openingTime < 14 && (closingTime < 6 || closingTime == '*')) {
                                                    anyTime.push(keywordResArr[k]);
                                                }

                                            }

                                        }
                                        else {
                                            runningTime = runningTimeDay.split('(')[0];
                                            runningDay = runningTimeDay.split('(')[1].split(')')[0];
                                            openingTime = runningTime.split('-')[0];
                                            closingTime = runningTime.split('-')[1];

                                            if (openingTime.includes(':')) {

                                                openingTime = Number(openingTime.split(':')[0]) + 1;

                                            }


                                            if (closingTime.includes(':')) {

                                                closingTime = Number(closingTime.split(':')[0]) + 1;

                                            }

                                            if (openingTime < 14 && (closingTime < 6 || closingTime == '*')) {
                                                anyTime.push(keywordResArr[k]);
                                            }


                                        }

                                    }


                                    let union = [...new Set([...anyTime])];

                                    displayMarkers(union);

                                    // updateMenu(intersection);



                                }
                                // 요일도 시간도 고르지 않은 경우 
                                else if (filtChk[0].checked == false && filtChk[1].checked == false && filtChk[2].checked == false
                                    && filtChk[3].checked == false && filtChk[4].checked == false && filtChk[5].checked == false && filtChk[6].checked == false
                                    && filtChk2[0].checked == false && filtChk2[1].checked == false) {

                                    displayMarkers(keywordResArr);

                                    // updateMenu(drunkenVege);

                                }
                            }


                        }
                    }


                }

            })

        }



        // 장소와 요일 기반 검색의 결과에 따라 안주 정보창을 업데이트합니다.
        function updateMenu(list) {

            let menuListEl = document.getElementById('menuList');
            
            removeAllChildNods(menuListEl);


            for (i = 0; i < list.length; i++) {
                let menuList = list[i]['menu'].split('/');
                

                for (j = 0; j < menuList.length; j++) {

                    var x = document.createElement("li");

                    var menuName = '👽' + menuList[j].split('+')[0];

                    var menuPrice = '⚡' + menuList[j].split('+')[1] + '원';

                    var menuNamePrice = menuName + '   ' + menuPrice;

                    var t = document.createTextNode(menuNamePrice);

                    x.appendChild(t);

                    document.getElementById("menuList").appendChild(x);

                }
            }

        }



        // 지도 위에 마커를 찍는 함수입니다
        function displayMarkers(list) {
            var listEl = document.getElementById('placesList'),
                menuEl = document.getElementById('menu_wrap'),
                fragment = document.createDocumentFragment(),
                listStr = '';

            // 검색 결과 목록에 추가된 항목들을 제거합니다
            removeAllChildNods(listEl);

            // 지도를 재설정할 범위정보를 가지고 있을 LatLngBounds 객체를 생성합니다
            var bounds = new kakao.maps.LatLngBounds();

            // 지도에 표시되고 있는 마커를 제거합니다
            removeMarker();

            if (list.length != 0) {
                for (var i = 0; i < list.length; i++) {

                    // 마커를 생성합니다
                    var placePosition = new kakao.maps.LatLng(list[i]['latitude'], list[i]['longitude']),
                        title = list[i]['name'],
                        marker = addMarker(placePosition, i, title), // 검색 결과 마커를 생성합니다
                        itemEl = getListItem(i, list[i]); // 검색 결과 항목 Element를 생성합니다


                    // 검색된 장소 위치를 기준으로 지도 범위를 재설정하기위해
                    // LatLngBounds 객체에 좌표를 추가합니다
                    bounds.extend(placePosition);

                    // 마커에 표시할 인포윈도우를 생성합니다 
                    var infowindow = new kakao.maps.InfoWindow({
                        content: '<div style="padding:10px; width: 250px; z-index:1;">' + list[i]['address'] + '</div>' // 인포윈도우에 표시할 내용
                    });

                    // 마커에 이벤트를 등록하는 함수 만들고 즉시 호출하여 클로저를 만듭니다
                    // 클로저를 만들어 주지 않으면 마지막 마커에만 이벤트가 등록됩니다
                    (function (marker, infowindow) {
                        // 마커에 click 이벤트를 등록하고 마우스 오버 시 인포윈도우를 표시합니다 
                        kakao.maps.event.addListener(marker, 'click', function () {
                            infowindow.open(map, marker);
                        });

                        // 마커에 mouseout 이벤트를 등록하고 마우스 아웃 시 인포윈도우를 닫습니다
                        kakao.maps.event.addListener(marker, 'mouseout', function () {
                            infowindow.close();
                        });
                    })(marker, infowindow);

                    fragment.appendChild(itemEl);

                }


                // 검색결과 항목 수를 보여줍니다
                var numStr = i;

                document.getElementById("numofResults").innerHTML = '<p>' + '총 ' + numStr + '개의 검색결과가 있습니다.' + '</p>';

                // 검색결과 항목들을 검색결과 목록 Elemnet에 추가합니다
                listEl.appendChild(fragment);
                menuEl.scrollTop = 0;

                map.setBounds(bounds);

            } else {

                // 검색 결과 목록에 추가된 항목들을 제거합니다
                var listEl = document.getElementById('placesList');
                removeAllChildNods(listEl);

                // 지도를 재설정할 범위정보를 가지고 있을 LatLngBounds 객체를 생성합니다
                var bounds = new kakao.maps.LatLngBounds();

                // 지도에 표시되고 있는 마커를 제거합니다
                removeMarker();

                // 검색결과가 존재하지 않음을 표기합니다
                document.getElementById("numofResults").innerHTML = '<p>' + '검색결과가 존재하지 않습니다.' + '</p>';


            }


        }


    </script>


    </div>



</body>

</html>